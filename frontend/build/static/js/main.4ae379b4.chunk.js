(this["webpackJsonptomtom-react"]=this["webpackJsonptomtom-react"]||[]).push([[0],{140:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.BUY="buy",e.PAID="paid"}(a||(a={}))},180:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return O}));var a=n(9),r=n.n(a),c=n(15),i=n(29),o=n(18),s=n(31),u=n.n(s),l=n(76),d=n(42),b=n(69),j=n(21),p=n(140),m="payments",f=function(){return Object(l.a)([m],Object(o.a)(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.tomtom.get(m);case 2:return t=e.sent,n=t.data,a=n.payments.map((function(e){var t=e.user,n=e.resource,a=e.transaction,r=e.createdAt,o=Object(i.a)(e,["user","resource","transaction","createdAt"]);return Object(c.a)(Object(c.a)({userName:t.name,resource:[n.name,n.price].join(", "),transaction:null===a||void 0===a?void 0:a.ref.toString().padStart(6,"0")},o),{},{date:u()(r).tz("Asia/Bangkok").format("DD/MM/YYYY hh:mm:ss")})})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))))},O=function(){var e=Object(d.b)();return Object(b.a)([m],function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,c,i,o,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,a=t.resourceId,c=t.transactionId,i=t.type,o=t.price,e.next=3,j.a.tomtom.post(m,{userId:n,type:i,resourceId:i===p.a.BUY?a:void 0,transactionId:i===p.a.PAID?c:void 0,price:Number(o)});case 3:return s=e.sent,u=s.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){e.invalidateQueries([m])}})}},195:function(e){e.exports=JSON.parse('{"page":{"dashboard":"Dashboard","users":"Users","resources":"Resources","transactions":"Transactions","payments":"Payments","admin":"Admin"}}')},196:function(e){e.exports=JSON.parse('{"page":{"dashboard":"Dashboard","users":"Users","resources":"Resources","transactions":"Transactions","payments":"Payments","admin":"Admin"}}')},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var a,r=n(9),c=n.n(r),i=n(18),o=n(185),s=n.n(o),u=n(31),l=n.n(u),d=n(186),b=n.n(d),j=n(75),p=n(48),m=n(15),f=n(29),O=n(187),h=n.n(O);!function(e){e.XFORM="application/x-www-form-urlencoded",e.JSON="application/json",e.FORMDATA="multipart/form-data"}(a||(a={}));var x=function(e,t,n,r){var c=r||{},i=c.contentType,o=void 0===i?a.JSON:i,s=Object(f.a)(c,["contentType"]);return t(e,n,Object(m.a)({headers:{"Content-Type":o}},s))},v=function(e,t,n,r){var c=r||{},i=c.contentType,o=void 0===i?a.JSON:i,s=Object(f.a)(c,["contentType"]);return t(e,Object(m.a)({params:n,headers:{"Content-Type":o}},s))},g=function e(t,n){if(t instanceof File)return n(t);if(t instanceof Array)return t.map((function(t){return e(t,n)}));if(t instanceof Object){var a={};return Object.keys(t).forEach((function(r){a[r]=e(t[r],n)})),a}return n(t)};n(159).config();var y,w,k=function(e){return l.a.isDayjs(e)?e.format():e},C=function(){var e=s.a.create({withCredentials:!0});return e.interceptors.request.use((function(e){e.url="".concat("http://127.0.0.1:8626/api/v1","/").concat(e.url);var t=Object(j.a)();return e.headers.common.Authorization="Bearer ".concat(t),e.params&&(e.params=g(e.params,k)),e.data&&(e.data=g(e.data,k),function(e){if(e.headers["Content-Type"]===a.FORMDATA){if(e.data){var t=new FormData;Object.entries(e.data).forEach((function(e){var n=Object(p.a)(e,2),a=n[0],r=n[1];r instanceof Array?r.forEach((function(e){t.append("".concat(a),e)})):t.append(a,r)})),e.data=t}}else e.headers["Content-Type"]===a.XFORM?e.data&&(e.data=h.a.stringify(e.data)):(e.headers["Content-Type"],a.JSON)}(e)),e})),e.interceptors.response.use((function(e){return e.headers["content-type"].includes("application/json")&&(e.data=b.a.camelizeKeys(e.data)),e}),(function(e){return Promise.reject(e)})),e}(),S={tomtom:(y=C,w=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a,r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",Promise.resolve(n));case 7:return e.prev=7,e.t0=e.catch(0),a=e.t0.response,r=e.t0.message,i=(a||{}).data,o=(i||{}).message,e.abrupt("return",Promise.reject(o||r||e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),{get:function(e,t,n){return w(v(e,y.get,t,n))},put:function(e,t,n){return w(x(e,y.put,t,n))},post:function(e,t,n){return w(x(e,y.post,t,n))},patch:function(e,t,n){return w(x(e,y.patch,t,n))},delete:function(e,t,n){return w(v(e,y.delete,t,n))},getFile:function(e,t,n){return w(v(e,y.get,t,Object(m.a)({responseType:"blob"},n)))}})}},219:function(e,t,n){},220:function(e,t,n){},264:function(e,t){},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return x})),n.d(t,"e",(function(){return v}));var a=n(9),r=n.n(a),c=n(18),i=n(76),o=n(42),s=n(69),u=n(21),l=n(30),d=n(75),b="health",j="auth",p="".concat(j,"/register"),m="".concat(j,"/sign-out"),f="".concat(l.a,"/current-user"),O=function(){return Object(i.a)([b],(function(){return u.a.tomtom.get(b)}),{onSuccess:function(){console.log(" Server is running ".padStart(10,"-").padEnd(10,"-"))},retry:2,cacheTime:6e5,staleTime:6e5})},h=function(){return Object(i.a)([l.a,f],Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.tomtom.get(f);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),{staleTime:6e5,cacheTime:6e5,enabled:!!Object(d.a)(),onError:function(){Object(d.b)()},retry:0})},x=function(){var e=Object(o.b)();return Object(s.a)(function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.tomtom.post(p,t);case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(t){var n=t.accessToken,a=t.user;Object(d.c)(n),e.setQueryData([l.a,f],a)}})},v=function(){var e=Object(o.b)();return Object(s.a)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.tomtom.post(m));case 1:case"end":return e.stop()}}),e)}))),{onSuccess:function(){Object(d.b)(),e.invalidateQueries([l.a,f]),e.removeQueries()}})}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return O}));var a=n(9),r=n.n(a),c=n(18),i=n(76),o=n(42),s=n(69),u=n(21),l=n(27),d="users",b="change-role",j="update",p=function(){return Object(i.a)([d],Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.tomtom.get(d);case 2:return t=e.sent,n=t.data,e.abrupt("return",n.users);case 5:case"end":return e.stop()}}),e)}))))},m=function(){var e=Object(o.b)();return Object(s.a)(function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.tomtom.post(l.a,t);case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){e.invalidateQueries([d])}})},f=function(){var e=Object(o.b)();return Object(s.a)([d,b],function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.userId,a=t.role,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.a.tomtom.patch("".concat(d,"/").concat(n,"/").concat(b),{role:a});case 5:return c=e.sent,i=c.data,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){e.invalidateQueries([d])}})},O=function(){var e=Object(o.b)();return Object(s.a)([d,j],function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,i,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.userId,a=t.name,c=t.password,i=t.role,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.a.tomtom.patch("".concat(d,"/").concat(n,"/").concat(j),{name:a,password:c,role:i});case 5:return o=e.sent,s=o.data,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){e.invalidateQueries([d])}})}},377:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o,s=n(0),u=n(17),l=n.n(u),d=(n(219),n(220),n(443)),b=n(42),j=n(16),p=n(56),m=n(181),f=n.n(m),O=function(e){return function(t){var n=t||{},a=n.routeParam,r=n.queryParam,c="";r&&(c="?".concat(f.a.stringify(r)));var i=e;a&&(i=e.split("/").map((function(e){return/:.+/.test(e)?a[e.slice(1)]:e})).join("/"));return"".concat(i).concat(c)}},h={notFound:O("/404"),signIn:O("/signIn"),dashboard:O("/dashboard"),users:O("/users"),userDetail:O("/users/:userId"),resources:O("/resources"),transactions:O("/transactions"),payments:O("/payments"),admin:O("/admin")},x=n(449),v=n(85),g=n(2),y=function(){var e=Object(x.a)().t;return Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[Object(g.jsx)(v.a,{size:40,weight:700,children:"404 Page Not Found"}),Object(g.jsx)(v.a,{size:20,children:e("title.pageNotFound")}),Object(g.jsx)(p.b,{to:h.dashboard(),style:{marginTop:30},children:Object(g.jsx)(v.a,{size:16,children:"Go to Dashboard"})})]})})},w=n(27),k=n(25),C=n(26),S=n(5),I=n(452),N=n(381),A=n(439),M=n(15),T=n(48),D=n(188),F=n.n(D),R=n(20),z=function(e){return Object(s.createContext)([e,function(e){},{reset:function(){},initialValue:e}])},E=function(e,t,n){return t},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Object(R.isNumber)(e)?e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t}):e},B=n(57),U=C.a.div(a||(a=Object(k.a)(["\n  background-color: rgba(212, 123, 120, 1);\n  display: flex;\n  align-items: baseline;\n  flex: 1;\n  flex-flow: row;\n  padding: 15px;\n"]))),W=C.a.div(r||(r=Object(k.a)(["\n  margin-left: auto;\n  align-self: center;\n  > .space-warpper {\n    display: flex;\n    align-items: center;\n    flex-flow: row;\n  }\n"]))),Y=Object(S.a)((function(e){return Object(I.a)({root:{fontSize:40,fontWeight:"bold",color:"white",textShadow:"2px 2px rgba(0,0,0,0.5)"}})}))(N.a),Q=function(){var e=Object(w.c)().data,t=Object(w.e)().mutate;return Object(g.jsxs)(U,{children:[Object(g.jsx)(Y,{children:"Tom Manager"}),Object(g.jsx)(W,{children:Object(g.jsxs)(B.a,{children:[Object(g.jsx)(Y,{style:{fontSize:24},children:"Hello: ".concat(null===e||void 0===e?void 0:e.name)}),Object(g.jsx)(Y,{style:{fontSize:24},children:"Your Balance: ".concat(P((null===e||void 0===e?void 0:e.balance)||0))}),Object(g.jsx)(A.a,{children:Object(g.jsx)(p.b,{to:h.signIn(),style:{textDecoration:"none"},onClick:function(){t()},children:Object(g.jsx)(N.a,{style:{fontSize:22,color:"WindowText",fontWeight:"bold"},children:"Sign Out"})})})]})})]})},V=function(e){return Object(g.jsx)(A.a,{children:Object(g.jsx)(p.b,{to:e.path,style:{textDecoration:"none"},children:Object(g.jsx)(N.a,{style:{color:"WindowText",fontWeight:"bold"},children:e.label})})})},L=function(){var e=Object(x.a)().t,t=Object(w.c)().data;return Object(g.jsxs)("div",{children:[Object(g.jsx)(V,{path:h.dashboard(),label:e("page.dashboard")}),Object(g.jsx)(V,{path:h.users(),label:e("page.users")}),Object(g.jsx)(V,{path:h.resources(),label:e("page.resources")}),Object(g.jsx)(V,{path:h.transactions(),label:e("page.transactions")}),Object(g.jsx)(V,{path:h.payments(),label:e("page.payments")}),"test@gmail.com"===(null===t||void 0===t?void 0:t.email)&&Object(g.jsx)(V,{path:h.admin(),label:e("page.admin")})]})},q=C.a.section(c||(c=Object(k.a)(["\n  width: 100vw;\n  height: 100vh;\n  display: grid;\n  grid-template-rows: max-content auto;\n"]))),G=C.a.div(i||(i=Object(k.a)(["\n  display: grid;\n  grid-template-columns: max-content auto;\n\n  main,\n  aside {\n    height: 100%;\n    width: 100%;\n  }\n  main {\n    > div {\n      padding: 20px;\n    }\n  }\n  aside {\n    width: 300px;\n    background-color: rgb(211, 230, 224);\n    > div {\n      padding: 15px 0;\n      > div,\n      > a {\n        padding: 10px 30px;\n      }\n    }\n  }\n"]))),H=function(e){var t=e.children;return Object(g.jsxs)(q,{children:[Object(g.jsx)("nav",{children:Object(g.jsx)(Q,{})}),Object(g.jsxs)(G,{children:[Object(g.jsx)("aside",{children:Object(g.jsx)(L,{})}),Object(g.jsx)("main",{children:Object(g.jsx)("div",{children:t})})]})]})},J=n(437),K=n(428),_=n(430),X=n(424),Z=n(426),$=n(429),ee=n(425),te=n(427),ne=Object(S.a)((function(e){return Object(I.a)({head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}})}))(X.a),ae=Object(S.a)((function(e){return Object(I.a)({root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}})}))(ee.a),re=function(e){var t=e.data,n=e.columns,a=e.renderActions,r=Object(s.useCallback)((function(e,t){return Object(g.jsxs)(ae,{children:[Object(g.jsx)(ne,{align:"left",children:t+1}),n.map((function(n){var a=e[n];return Object(g.jsx)(ne,{component:"th",scope:"row",children:Object(R.isNumber)(a)||a?a:"-"},"".concat(e.id,"-").concat(t,"-").concat(n))})),a&&Object(g.jsx)(ne,{component:"th",scope:"row",children:a(e)},"action")]},e.id)}),[n,a]),c=Object(s.useCallback)((function(e,t){var n=e;return Object(g.jsx)(ne,{align:"left",children:Object(R.capitalize)(n)},"".concat(t,"-").concat(n))}),[]);return Object(g.jsx)(Z.a,{component:te.a,children:Object(g.jsxs)(K.a,{"aria-label":"customized table",children:[Object(g.jsx)($.a,{children:Object(g.jsxs)(ee.a,{children:[Object(g.jsx)(ne,{width:"40px",align:"center",children:"#"}),n.map(c),a&&Object(g.jsx)(ne,{className:"actions"},"action")]})}),Object(g.jsx)(_.a,{children:t&&t.map(r)})]})})},ce=function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h4",{children:e.title}),e.children]})},ie=(z({}),z({visible:!1,userId:"",name:"",password:"",role:""}));!function(e){e.ADMIN="admin",e.MANAGER="manager",e.USER="user",e.VIEVWER="viewer"}(o||(o={}));var oe,se,ue,le,de=n(30),be=n(435),je=n(444),pe=n(115),me=n(47),fe=n(41),Oe=n(192),he=n.n(Oe),xe=Object(be.a)((function(e){return Object(I.a)({layout:{padding:20},avatar:{backgroundColor:pe.a[100],color:pe.a[600]},button:{margin:e.spacing(1)}})})),ve=function(){var e=xe(),t=Object(de.e)().mutate,n=Object(s.useContext)(ie),a=Object(T.a)(n,3),r=a[0],c=(a[1],a[2].reset),i=r.visible,u=r.userId,l=r.name,d=r.password,b=r.role,j=Object(s.useCallback)((function(){c()}),[c]),p=Object(s.useCallback)((function(e){var n=e.name,a=e.password,r=e.role;t({userId:u,name:n,password:a,role:r},{onSuccess:function(){j()}})}),[j,t,u]),m=Object(s.useMemo)((function(){return[{value:o.USER,label:Object(R.capitalize)(o.USER)},{value:o.MANAGER,label:Object(R.capitalize)(o.MANAGER)},{value:o.ADMIN,label:Object(R.capitalize)(o.ADMIN)}]}),[]);return Object(g.jsx)(je.a,{onClose:j,"aria-labelledby":"simple-dialog-title",open:i,children:Object(g.jsx)(te.a,{className:e.layout,children:Object(g.jsx)(me.b,{onSubmit:p,initialValues:{name:l,password:d,role:b},children:function(t){var n=t.handleSubmit;return Object(g.jsxs)(B.a,{direction:"column",children:[Object(g.jsx)(fe.a,{name:"name",label:"Name"}),Object(g.jsx)(fe.d,{name:"role",label:"Role",options:m}),Object(g.jsx)(J.a,{variant:"contained",color:"primary",className:e.button,startIcon:Object(g.jsx)(he.a,{}),onClick:n,children:"Save"})]})}})})})},ge=(oe=ie,function(e){return function(t){var n=Object(s.useMemo)((function(){return oe._currentValue[0]||{}}),[]),a=Object(s.useState)(n),r=Object(T.a)(a,2),c=r[0],i=r[1],o=Object(s.useRef)(c),u=Object(s.useCallback)((function(e){var t=F()(o.current,e,{arrayMerge:E});Object(R.isEqual)(t,o.current)||(o.current=t,i(t))}),[]),l=Object(s.useCallback)((function(){Object(R.isEqual)(n,o.current)||(o.current=n,i(n))}),[n]);return Object(g.jsx)(oe.Provider,{value:[c,u,{reset:l,initialValue:n}],children:Object(g.jsx)(e,Object(M.a)({},t))})}})((function(){var e=Object(de.d)().data,t=Object(de.b)().mutate,n=Object(s.useContext)(ie),a=Object(T.a)(n,2)[1],r=Object(s.useCallback)((function(e,n,a){return Object(g.jsx)(J.a,{variant:"contained",color:n===a?"secondary":"default",style:{fontWeight:"bold"},size:"small",onClick:function(){n!==a&&t({userId:e,role:a})},children:Object(R.capitalize)(a)},"".concat(e,"-").concat(n,"-").concat(a))}),[t]),c=Object(s.useCallback)((function(e){var t=e.id,n=e.name,c=e.role,i=[o.USER,o.MANAGER,o.ADMIN];return Object(g.jsxs)(B.a,{spacing:10,children:[Object(g.jsx)(B.a,{spacing:10,children:i.map((function(e){return r(t,c,e)}))}),Object(g.jsx)(J.a,{variant:"outlined",color:"primary",style:{fontWeight:"bold"},size:"small",onClick:function(){a({visible:!0,userId:t,name:n,role:c})},children:"Edit"})]})}),[r,a]);return Object(g.jsxs)(ce,{title:"Admin",children:[Object(g.jsx)(re,{data:e,columns:["name","email","balance"],renderActions:c}),Object(g.jsx)(ve,{})]})})),ye=n(82),we=n(201),ke=n(31),Ce=n.n(ke),Se=["#91cf96","#c881d2","#ffbaa2","#29b6f6"],Ie=function(){var e=Object(ye.b)().data,t=Object(s.useMemo)((function(){return{labels:e?e.map((function(e){return Ce()(e.date).format("DD/MM/YYYY hh:mm")})):[],datasets:[{label:"Price",yAxisID:"Price",borderColor:Se[0],pointBorderColor:Se[0],pointHoverBackgroundColor:Se[0],data:e?e.map((function(e){return e.price})):[]},{label:"Remain",yAxisID:"Remain",borderColor:Se[1],pointBorderColor:Se[1],pointHoverBackgroundColor:Se[1],data:e?e.map((function(e){return e.remain})):[]},{label:"Total User",yAxisID:"TotalUser",borderColor:Se[2],pointBorderColor:Se[2],pointHoverBackgroundColor:Se[2],data:e?e.map((function(e){return e.totalUser})):[]}]}}),[e]);return Object(g.jsx)("div",{children:Object(g.jsx)(we.a,{type:"bar",height:100,data:t,options:{scales:{Price:{title:{text:"Price",display:!0},type:"linear",position:"left",min:0,max:1e3,ticks:{stepSize:100,color:Se[0]}},Remain:{title:{text:"Remain",display:!0},type:"linear",position:"left",min:0,max:1e3,ticks:{stepSize:100,color:Se[1]}},TotalUser:{title:{text:"TotalUser",display:!0},type:"linear",position:"right",min:0,max:5,ticks:{stepSize:1,color:Se[2]}}}}})})},Ne=function(){return Object(g.jsx)(ce,{title:"Dashboard",children:Object(g.jsx)(Ie,{})})},Ae=n(180),Me=function(e){var t=Object(w.c)().data;return(null===t||void 0===t?void 0:t.role)&&e.role.includes(null===t||void 0===t?void 0:t.role)?Object(g.jsx)(g.Fragment,{children:e.children}):Object(g.jsx)(g.Fragment,{})},Te=Object(s.lazy)((function(){return n.e(3).then(n.bind(null,455))})),De=function(){var e=Object(Ae.b)().data;return Object(g.jsxs)(ce,{title:"Payment Management",children:[Object(g.jsx)(Me,{role:[o.ADMIN,o.MANAGER],children:Object(g.jsx)(s.Suspense,{fallback:Object(g.jsx)("div",{children:"Loading..."}),children:Object(g.jsx)(Te,{})})}),Object(g.jsx)(re,{data:e,columns:["ref","userName","price","type","resource","transaction","date"]})]})},Fe=n(9),Re=n.n(Fe),ze=n(18),Ee=n(442),Pe=Object(be.a)({appModal:{display:"flex",alignItems:"center",justifyContent:"center"},layout:{display:"flex",flexFlow:"column",justifyContent:"flex-start",alignItems:"center",background:"#FFFFFF",padding:"2.188rem",borderRadius:"1.25rem","&:focus":{outline:"unset"}},header:{marginBottom:"0.625rem",textAlign:"left"},closeIcon:{display:"flex",justifyContent:"flex-end",width:"100%"},body:{marginBottom:"1.625rem",textAlign:"center"},footer:{display:"flex",justifyContent:"center","& > *:first-of-type(1)":{marginRight:"0.625rem"}}}),Be=function(e){var t=e.visible,n=e.className,a=e.fieldNames,r=e.onSubmit,c=e.closeModal,i=Object(s.useCallback)((function(e){return Object(g.jsx)(fe.a,{name:e,label:Object(R.capitalize)(e),placeholder:Object(R.capitalize)(e),required:!0},e)}),[]),o=Pe();return Object(g.jsx)(Ee.a,{open:t,className:"".concat(o.appModal," ").concat(n),"aria-labelledby":"app-modal-title","aria-describedby":"app-modal-description",disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,onBackdropClick:c,children:Object(g.jsx)("div",{className:"content ".concat(o.layout),children:Object(g.jsx)(me.b,{initialValues:{},onSubmit:function(){var e=Object(ze.a)(Re.a.mark((function e(t){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(t);case 3:c(),e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.handleSubmit,n=e.submitError;return Object(g.jsxs)("form",{children:[Object(g.jsx)("h3",{style:{color:"red"},children:n}),a.map(i),Object(g.jsx)("button",{type:"button",name:"submit",onClick:t,children:"Submit"})]})}})})})},Ue=C.a.div(se||(se=Object(k.a)(["\n  margin: 20px 0;\n"]))),We=function(e){var t=e.name,n=e.fieldNames,a=e.onSubmit,r=Object(s.useState)(!1),c=Object(T.a)(r,2),i=c[0],o=c[1],u=Object(s.useCallback)((function(){o(!0)}),[]),l=Object(s.useCallback)((function(){o(!1)}),[]),d=Object(s.useCallback)((function(e){a(e)}),[a]);return Object(g.jsxs)(Ue,{children:[Object(g.jsx)(J.a,{variant:"outlined",color:"primary",onClick:u,children:t}),Object(g.jsx)(Be,{visible:i,fieldNames:n,onSubmit:d,closeModal:l})]})},Ye=n(91),Qe=function(){var e=Object(Ye.b)().data,t=Object(Ye.a)().mutate;return Object(g.jsxs)(ce,{title:"Resource",children:[Object(g.jsx)(Me,{role:[o.ADMIN,o.MANAGER],children:Object(g.jsx)(We,{fieldNames:["name","price"],name:"Add Resource",onSubmit:function(e){var n=e,a=n.name,r=n.price;console.log(e),t({name:a,price:r})}})}),Object(g.jsx)(re,{data:e,columns:["ref","name","price"]})]})},Ve=C.a.form(ue||(ue=Object(k.a)(["\n  margin: 20px;\n\n  > button {\n    margin-top: 20px;\n  }\n"]))),Le=function(){var e=Object(ye.a)().mutate,t=Object(de.d)().data,n=Object(Ye.b)().data,a=Object(s.useMemo)((function(){return(null===t||void 0===t?void 0:t.map((function(e){return{value:e.id,label:e.name}})))||[]}),[t]),r=Object(s.useMemo)((function(){return(null===n||void 0===n?void 0:n.map((function(e){return{value:e.id,label:e.name}})))||[]}),[n]);return Object(g.jsx)(me.b,{onSubmit:function(t){e(t)},initialValues:{userIds:[],resourceIds:[]},children:function(e){var t=e.handleSubmit;return Object(g.jsxs)(Ve,{children:[Object(g.jsx)(fe.a,{name:"price",label:"Price",required:!0}),Object(g.jsx)(fe.b,{name:"userIds",label:"User",options:a,required:!0}),Object(g.jsx)(fe.b,{name:"resourceIds",label:"Resource",options:r,required:!0}),Object(g.jsx)("button",{type:"button",title:"button",onClick:t,children:"Submit"})]})}})},qe=function(){var e=Object(ye.b)().data;return Object(g.jsxs)(ce,{title:"Transaction Management",children:[Object(g.jsx)(Me,{role:[o.ADMIN,o.MANAGER],children:Object(g.jsx)(Le,{})}),Object(g.jsx)(re,{data:e,columns:["ref","totalUser","remain","price","date","completed"]})]})},Ge=function(){var e=Object(de.d)().data,t=Object(de.c)().mutate;return Object(g.jsxs)(ce,{title:"User Management",children:[Object(g.jsx)(Me,{role:[o.ADMIN],children:Object(g.jsx)(We,{fieldNames:["name","email","password"],name:"Add User",onSubmit:function(e){var n=e,a=n.email,r=n.password,c=n.name;console.log(e),t({email:a,password:r,name:c})}})}),Object(g.jsx)(re,{data:e,columns:["name","email","balance"]})]})},He=function(){var e=Object(w.c)().data;return Object(g.jsx)(H,{children:Object(g.jsxs)(j.d,{children:[Object(g.jsx)(j.a,{exact:!0,from:"/",to:h.dashboard()}),Object(g.jsx)(j.b,{path:h.dashboard(),component:Ne}),Object(g.jsx)(j.b,{path:h.users(),component:Ge}),Object(g.jsx)(j.b,{path:h.resources(),component:Qe}),Object(g.jsx)(j.b,{path:h.transactions(),component:qe}),Object(g.jsx)(j.b,{path:h.payments(),component:De}),"test@gmail.com"===(null===e||void 0===e?void 0:e.email)&&Object(g.jsx)(j.b,{path:h.admin(),component:ge}),Object(g.jsx)(j.a,{to:h.notFound()})]})})},Je=C.a.div(le||(le=Object(k.a)(["\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Ke=function(){var e=Object(w.d)().mutateAsync;return Object(g.jsx)(Je,{children:Object(g.jsx)(me.b,{initialValues:{email:"test@gmail.com",password:"123456"},onSubmit:function(){var t=Object(ze.a)(Re.a.mark((function t(n){return Re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(n);case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),children:function(e){var t=e.handleSubmit;return Object(g.jsx)("form",{children:Object(g.jsxs)(B.a,{direction:"column",justify:"center",alignItem:"center",children:[Object(g.jsx)("h1",{children:"Tom-Tom Manager"}),Object(g.jsxs)("div",{style:{width:"max-content"},children:[Object(g.jsx)("h2",{children:"Register Or SignIn"}),Object(g.jsx)("label",{htmlFor:"email",children:"Email"}),Object(g.jsx)(fe.a,{id:"email",name:"email",type:"email"}),Object(g.jsx)("label",{htmlFor:"password",children:"Password"}),Object(g.jsx)(fe.a,{id:"password",name:"email",type:"password"}),Object(g.jsx)("button",{type:"button",onClick:t,children:"Submit"})]})]})})}})})},_e=function(){Object(w.b)();var e=Object(w.c)(),t=e.data,n=e.isLoading,a=Object(s.useMemo)((function(){return!!t}),[t]);return n?Object(g.jsx)(g.Fragment,{children:"Loading..."}):Object(g.jsxs)(j.d,{children:[a?Object(g.jsx)(j.a,{from:h.signIn(),to:"/"}):Object(g.jsx)(j.b,{path:h.signIn(),component:Ke}),Object(g.jsx)(j.b,{path:h.notFound(),component:y}),a?Object(g.jsx)(He,{}):Object(g.jsx)(j.a,{to:h.signIn()}),Object(g.jsx)(j.a,{to:h.notFound()})]})},Xe=n(200),Ze=n(438),$e=n(144),et=n(74),tt={th:{translation:n(195)},en:{translation:n(196)}};$e.a.use(et.e).init({resources:tt,fallbackLng:"en",lng:"th"});var nt=$e.a,at=n(197),rt=n.n(at),ct=n(198),it=n.n(ct),ot=n(199),st=n.n(ot);Ce.a.extend(it.a),Ce.a.extend(rt.a),Ce.a.extend(st.a),Ce.a.tz.setDefault("Asia/Bangkok");var ut=new d.a,lt=function(){return Object(g.jsx)(Ze.a,{i18n:nt,children:Object(g.jsxs)(b.a,{client:ut,children:[Object(g.jsx)(p.a,{children:Object(g.jsx)(s.Suspense,{fallback:Object(g.jsx)("div",{children:"...loading"}),children:Object(g.jsx)(_e,{})})}),Object(g.jsx)(Xe.ReactQueryDevtools,{initialIsOpen:!1})]})})},dt=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,454)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};n(159).config(),l.a.render(Object(g.jsx)(s.StrictMode,{children:Object(g.jsx)(lt,{})}),document.getElementById("root")),dt()},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return F})),n.d(t,"b",(function(){return R})),n.d(t,"d",(function(){return z})),n.d(t,"c",(function(){return E}));var a=n(15),r=n(29),c=n(439),i=n(448),o=n(2),s=function(e){var t=e.disabled,n=void 0!==t&&t,s=Object(r.a)(e,["disabled"]);return Object(o.jsx)(c.a,{style:{marginTop:20,marginBottom:20},children:Object(o.jsx)(i.a,Object(a.a)({variant:"outlined",disabled:n},s))})},u=n(435),l=n(452),d=n(63),b=n(433),j=n(434),p=n(440),m=n(431),f=n(447),O=n(446),h=n(0),x=Object(u.a)((function(e){return Object(l.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})})),v={PaperProps:{style:{maxHeight:224,width:250}}};function g(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var y=function(e){var t=e.label,n=e.value,a=void 0===n?[]:n,r=e.options,c=e.onChange,i=x(),s=Object(d.a)(),u=Object(h.useCallback)((function(e){var t=e.target.value;null===c||void 0===c||c(t)}),[c]),l=Object(h.useMemo)((function(){var e={};return r.forEach((function(t){var n=t.value,a=t.label;e[n]=a,e[a]=n})),e}),[r]);return Object(o.jsxs)(b.a,{className:i.formControl,children:[Object(o.jsx)(j.a,{id:"demo-mutiple-chip-label",children:t}),Object(o.jsx)(p.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:a,onChange:u,input:Object(o.jsx)(m.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(o.jsx)("div",{className:i.chips,children:e.map((function(e){return Object(o.jsx)(f.a,{label:l[e],className:i.chip},e)}))})},MenuProps:v,children:r.map((function(e){var t=e.label,n=e.value;return Object(o.jsx)(O.a,{value:n,style:g(t,a,s),children:t},n)}))})]})},w=n(441),k=n(453),C=n(436),S=n(382),I=function(e){var t=e.label,n=e.value,a=e.options,r=e.onChange,c=Object(h.useCallback)((function(e){null===r||void 0===r||r(e.target.value)}),[r]),i=Object(h.useCallback)((function(e){return Object(o.jsx)(C.a,{value:e.value,control:Object(o.jsx)(w.a,{}),label:e.label},e.value)}),[]);return Object(o.jsxs)(b.a,{component:"fieldset",style:{marginTop:20,marginBottom:20},children:[Object(o.jsx)(S.a,{component:"legend",children:t}),Object(o.jsx)(k.a,{"aria-label":"gender",name:"gender1",value:n,onChange:c,children:a.map(i)})]})},N=Object(u.a)((function(e){return Object(l.a)({formControl:{marginTop:20,marginBottom:20,minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),A=function(e){var t=e.label,n=e.value,a=e.options,r=e.onChange,c=N(),i=Object(h.useCallback)((function(e){var t=e.target.value;null===r||void 0===r||r(t)}),[r]);return Object(o.jsxs)(b.a,{variant:"outlined",className:c.formControl,children:[Object(o.jsx)(j.a,{htmlFor:"outlined-age-native-simple",style:{backgroundColor:"white",paddingRight:6,paddingLeft:6},children:t}),Object(o.jsx)(p.a,{native:!0,value:n,onChange:i,label:"Age",inputProps:{name:t,id:"outlined-age-native-simple"},children:a.map((function(e){var t=e.value,n=e.label;return Object(o.jsx)("option",{value:t,children:n},t)}))})]})},M=n(47),T=n(85),D=function(e){var t,n=(t=e,function(e){var n=e.input,c=e.meta,i=e.style,s=e.className,u=Object(r.a)(e,["input","meta","style","className"]),l=c.error,d=c.touched,b=Object(h.useMemo)((function(){return l&&d}),[l,d]);return Object(o.jsxs)("div",{className:"".concat(s),style:i,children:[Object(o.jsx)(t,Object(a.a)(Object(a.a)({},n),u)),b&&Object(o.jsx)(T.a,{color:"red",size:12,children:c.error})]})});return function(e){return Object(o.jsx)(M.a,Object(a.a)(Object(a.a)({},e),{},{render:n}))}},F=D(s),R=D(y),z=D(A),E=D(I)},57:function(e,t,n){"use strict";var a,r=n(25),c=n(26),i=n(379),o=n(20),s=n(2),u=c.a.div(a||(a=Object(r.a)(["\n  display: flex;\n  flex-flow: ",";\n  justify-content: ",";\n  align-items: ",";\n  align-content: ",";\n\n  > .space-item {\n    width: max-content;\n    ",";\n\n    :last-of-type {\n      margin-right: 0;\n      margin-bottom: 0;\n    }\n  }\n"])),(function(e){return e.direction}),(function(e){return e.justify}),(function(e){return e.alignItem}),(function(e){return e.alignContent}),(function(e){var t=e.direction,n=e.spacing;return"row"===t?"margin-right: ".concat(n,"px"):"margin-bottom: ".concat(n,"px")}));t.a=function(e){var t=e.direction,n=void 0===t?"row":t,a=e.spacing,r=void 0===a?20:a,c=e.alignContent,l=e.alignItem,d=e.justify,b=e.children,j=e.style;return Object(s.jsxs)(u,{className:"space-warpper",direction:n,spacing:r,alignContent:c,alignItem:l,justify:d,style:j,children:[Object(o.flatten)([b]).map((function(e,t){return Object(s.jsx)("div",{className:"space-item",children:e},t)})),Object(s.jsx)(i.a,{})]})}},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c}));var a=function(){return localStorage.getItem("AUTH_TOKEN")},r=function(e){localStorage.setItem("AUTH_TOKEN",e)},c=function(){localStorage.removeItem("AUTH_TOKEN")}},82:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return f}));var a=n(15),r=n(29),c=n(9),i=n.n(c),o=n(18),s=n(31),u=n.n(s),l=(n(20),n(76)),d=n(42),b=n(69),j=n(21),p="transactions",m=("".concat(p,"/history"),function(e){return Object(l.a)([p,e],Object(o.a)(i.a.mark((function t(){var n,a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.tomtom.get(p,e);case 2:return n=t.sent,a=n.data,r=a.transactions.map(O),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))))}),f=function(){var e=Object(d.b)();return Object(b.a)([p],function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userIds,a=t.resourceIds,r=t.price,e.next=3,j.a.tomtom.post(p,{userIds:n,resourceIds:a,price:Number(r)});case 3:return c=e.sent,o=c.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){e.invalidateQueries([p])}})},O=function(e){var t=e.ref,n=e.users,c=(e.resources,e.createdAt),i=e.completed,o=Object(r.a)(e,["ref","users","resources","createdAt","completed"]);return Object(a.a)(Object(a.a)({},o),{},{ref:t.toString().padStart(6,"0"),totalUser:(null===n||void 0===n?void 0:n.length)||0,completed:i?"Completed":"Pending",date:u()(c).tz("Asia/Bangkok").format("DD/MM/YYYY hh:mm:ss")})}},85:function(e,t,n){"use strict";var a,r=n(15),c=n(29),i=n(25),o=n(26),s=n(2),u=o.a.div(a||(a=Object(i.a)(["\n  font-family: 'Kanit', sans-serif;\n  font-weight: ",";\n  font-size: ","rem;\n  color: ",";\n  display: flex;\n\n  white-space: pre-wrap;\n  word-break: break-word;\n"])),(function(e){return e.weight}),(function(e){return e.size/16}),(function(e){return e.color}));t.a=function(e){var t=e.children,n=e.size,a=void 0===n?17:n,i=e.weight,o=void 0===i?400:i,l=e.className,d=e.color,b=void 0===d?"#000000":d,j=e.style,p=e.wrap,m=void 0===p||p,f=Object(c.a)(e,["children","size","weight","className","color","style","wrap"]);return Object(s.jsx)(u,Object(r.a)(Object(r.a)({size:a,weight:o,className:m?"".concat(l):l,color:b,style:j},f),{},{children:t}))}},91:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return p}));var a=n(9),r=n.n(a),c=n(15),i=n(29),o=n(18),s=n(76),u=n(42),l=n(69),d=n(21),b="resources",j=function(){return Object(s.a)([b],Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.tomtom.get(b);case 2:return t=e.sent,n=t.data,e.abrupt("return",n.resources.map((function(e){var t=e.ref,n=Object(i.a)(e,["ref"]);return Object(c.a)(Object(c.a)({},n),{},{ref:t.toString().padStart(6,"0")})})));case 5:case"end":return e.stop()}}),e)}))))},p=function(){var e=Object(u.b)();return Object(l.a)([b],function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.price,e.next=3,d.a.tomtom.post(b,{name:n,price:Number(a)});case 3:return c=e.sent,i=c.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){e.invalidateQueries([b])}})}}},[[377,1,2]]]);
//# sourceMappingURL=main.4ae379b4.chunk.js.map